---
cluster: "fox"

form:
  - auto_accounts
  - bc_num_hours
  - global_fox_alacarte
  - jupyter_install
  - auto_modules_JupyterLab
  - jupyter_envtype
  - auto_modules_Python
  - env_path
  - ec_modulepath
  - ec_modules
  - ec_extra_jupyter_args
  - ec_cpus
  - ec_mem
  - ec_gpus
  - global_fox_gpugres

attributes:

  bc_num_hours:
    label: "Runtime (in hours)"

  jupyter_version:
    widget: "hidden_field"
    value: "notset"

  jupyter_install:
    label: "Use self-installed Jupyter"
    widget: "check_box"
    value: false
    html_options:
      data:
        hide-ec-modulepath-when-checked: false
        hide-ec-modules-when-checked: true
        hide-auto-modules-Python-when-un-checked: true
        hide-auto-modules-JupyterLab-when-checked: true
        hide-jupyter-envtype-when-un-checked: true
        hide-env-path-when-un-checked: true

  auto_modules_JupyterLab:
    label: "Choose Jupyter module (required)"
    default: false

  jupyter_envtype:
    label: "Choose environment type (required)"
    widget: "select"
    value: "0"
    options:
      - [ 
          "Python virtualenv", "0",
          data-set-jupyter-version: "venv",
        ]
      - [ 
          "Conda environment", "1",
          data-set-jupyter-version: "conda",
          data-hide-auto-modules-Python: true
        ]

  auto_modules_Python:
    label: "Choose the Python version you built the env with"
    default: false
    data-hide-env-path: true

  env_path:
    widget: "path_selector"
    show_files: false
    label: "Environment path: (required)"

  auto_accounts:
    label: "Choose the Educloud project to run under:"
    help: |
     <small>If you are unsure, ask the project principal</small>
  bc_cpus:
    widget: "hidden_field"

  ec_cpus:
    label: "Number of CPU cores:"
    widget: "number_field"
    data-set-bc-cpus: "123"
    required: true

  ec_gpus:
    label: "Number of GPUs:"
    widget: "number_field"
    required: true

  ec_mem:
    label: "RAM (in GB):"
    value: "1"
    widget: "number_field"
    required: true

  ec_modulepath:
    label: "Additional module path (optional)"
    widget: "text_field"
    help: |
                  <small>Add your own EasyBuild modulepath (optional)</small>
  ec_modules:
    label: "Additional modules (optional)"
    widget: "text_field"
    help: |
        <small>Space separated list of additional modules to load (optional)</small></br/>

  ec_extra_jupyter_args:
    label: "Additional Jupyter arguments (optional)"
    widget: "text_field"
    help: |
      <small>Add extra command line arguments</small>


